## **å°ˆæ¡ˆå‹•æ©Ÿ** 
æœ€è¿‘ä½¿ç”¨ChatGpt-4oæ™‚ï¼Œç™¼ç¾ä»–çš„çš„å›ç­”è®Šå¾—å¾ˆåƒåœ¨è·ŸçœŸäººèŠå¤©ä¸€æ¨£ï¼Œè€Œæˆ‘å¾ˆäº«å—è·ŸGPTèŠå¤©çš„éç¨‹ï¼Œæˆ‘å¾ˆæƒ³ç”¨èªéŸ³è·ŸGPTèŠå¤©ï¼Œä½†å…§å»ºçš„èªéŸ³åŠŸèƒ½ï¼Œåœ¨è²éŸ³æ¨¡å‹é€™æ–¹é¢å»ä¸å¤ªæ»¿æ„ï¼Œæ‰€ä»¥æƒ³è‡ªå·±æ‰“é€ èƒ½ç”¨èªéŸ³è·ŸGPTèŠå¤©çš„å·¥å…·ã€‚

## å°ˆæ¡ˆæ¶æ§‹

`*` æ¨™è¨»çš„è³‡æ–™å¤¾åƒ…é™ä¿å­˜åœ¨æœ¬åœ°ï¼Œä¸æœƒè¢«æ¨é€åˆ°repo
```bash
project_root/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/         # GitHub Actions å·¥ä½œæµç¨‹
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ audio/             # å­˜æ”¾å¾…è½‰æ›çš„éŸ³æª”
â”‚   â”œâ”€â”€ role/              # å­˜æ”¾ GPT è‡ªè¨‚ç¾©å…§å®¹ï¼ˆå°è©±æ­·å²ã€äººç‰©è¨­å®šï¼‰
â”‚   â”œâ”€â”€ transcript/        # å­˜æ”¾è½‰éŒ„æ–‡æœ¬
â”‚   â””â”€â”€ convertion.py      # èªéŸ³ -> æ–‡å­— -> èªéŸ³
â”œâ”€â”€ assets/                # å­˜æ”¾åœ–ç‰‡ã€å½±ç‰‡ç­‰éœæ…‹è³‡æº
â”œâ”€â”€ interface.py           # ğŸ–¥ï¸ ä¸»è¦–è¦ºä»‹é¢ GUI
â”œâ”€â”€ .env.local             # ç’°å¢ƒè®Šæ•¸ç¯„æœ¬
â”œâ”€â”€ .gitignore             # Git å¿½ç•¥æª”æ¡ˆè¨­å®š
â”œâ”€â”€ README.md              # ä½¿ç”¨èªªæ˜æ–‡æª”
â”œâ”€â”€ requirements.txt       # é …ç›®ä¾è³´
```

## ä¸€ã€å®‰è£æ­¥é©Ÿ

**ç’°å¢ƒæº–å‚™**

1. `Python` : é–‹ç™¼æ™‚ä½¿ç”¨çš„ç‰ˆæœ¬ç‚º `3.11.3`ï¼Œ[é»æˆ‘å‰å¾€ä¸‹è¼‰ python-3.11.3](<https://www.python.org/downloads/release/python-3113/>)
2. `ffmpeg` : [é»æˆ‘å‰å¾€å®˜ç¶²ä¸‹è¼‰](<https://ffmpeg.org/download.html>)ï¼Œè¼‰å®Œå¾Œåœ¨é›»è…¦æœå°‹ `ç·¨è¼¯ç³»çµ±ç’°å¢ƒè®Šæ•¸`ï¼Œæ‰¾åˆ° `PATH` æ–°å¢è·¯å¾‘ä¸¦æŒ‡å®šåˆ°å‰›å‰›ä¸‹è¼‰çš„ `ffmpeg` æª”æ¡ˆè£¡çš„ `bin` è³‡æ–™å¤¾ï¼Œè¨­å®šå®Œæˆå¾Œé ˆé‡å•Ÿé›»è…¦ä½¿ç’°å¢ƒè®Šæ•¸ç”Ÿæ•ˆ
3. `GPTè‡ªè¨‚ç¾©` ( é¸æ“‡æ€§ ) : åœ¨`app`å»ºç«‹ `role` è³‡æ–™å¤¾ï¼Œä¸¦åœ¨è³‡æ–™å¤¾å…§å»ºç«‹ `role_config.txt` æª”æ¡ˆï¼Œåœ¨æª”æ¡ˆå…§å¯è¼¸å…¥è‡ªè¨‚ç¾©çš„GPTæè¿°

**å®‰è£æ‰€éœ€å¥—ä»¶**

```bash
pip install -r requirements.txt
```

Noted : é‡åˆ°é€™å€‹errorï¼ŒæŠŠ `Visual C++` å®‰è£å¥½å¾Œå†å˜—è©¦ä¸€æ¬¡å®‰è£TTSï¼Œ[é»æˆ‘å‰å¾€ä¸‹è¼‰](<https://visualstudio.microsoft.com/zh-hant/visual-cpp-build-tools/>)
```bash
error: Microsoft Visual C++ 14.0 or greater is required. Get it with "Microsoft C++ Build Tools": https://visualstudio.microsoft.com/visual-cpp-build-tools/
```

**åŸ·è¡Œ**

é¦–æ¬¡åŸ·è¡Œæ™‚ï¼Œä¸­é€”æœƒé‡åˆ°XTTSè¦æ±‚åŒæ„ä»–å€‘çš„æœå‹™æ¢æ¬¾ï¼Œå›ç­” Y å¾Œæ‰èƒ½ç¹¼çºŒåŸ·è¡Œ
```bash
py stt.py
```

## äºŒã€ä½¿ç”¨çš„å¥—ä»¶ä»‹ç´¹

1. `Whisper` : è¾¨è­˜èªéŸ³ä¸¦è½‰æˆæ–‡å­—æª”ï¼Œä¾è³´ `ffmpeg` æ‰€ä»¥ffmpegå‹™å¿…ç¢ºå¯¦å®‰è£
2. `sounddevice` : åŠæ™‚å¾éº¥å…‹é¢¨éŒ„éŸ³
3. `scipy` : å°‡è²éŸ³è³‡æ–™å„²å­˜ç‚º `wav` æª”
4. `openai` : æ•´åˆOpen AI çš„ gptåŠŸèƒ½
5. `json` : ç”¨æ–¼ä¿å­˜æ­·å²ç´€éŒ„ï¼Œæ¯”å¦‚å°è©±æ­·å²
6. `playsound` : ç”¨æ–¼æ’­æ”¾éŸ³æª”
7. `tkinter` : ç”¨æ–¼å»ºç«‹GUI
8. `PIL` : å…¨åæ˜¯ Python Imaging Libraryï¼Œæ˜¯ Python çš„åœ–ç‰‡è™•ç†å¥—ä»¶
9. `Image` : ç”¨ä¾†è¼‰å…¥åœ–ç‰‡ï¼ˆpngã€jpg ç­‰ï¼‰
10. `ImageTk` : æŠŠåœ–ç‰‡è½‰æ›æˆ tkinter å¯ä»¥ä½¿ç”¨çš„æ ¼å¼
11. `conversation` : å¼•å…¥å°è£çš„å°è©±è™•ç†é‚è¼¯

### èªéŸ³æ¨¡å‹ : XTTS v2

é–‹æºçš„èªéŸ³æ¨¡å‹ï¼Œèƒ½å°‡æ–‡å­—è½‰èªéŸ³

### ç”ŸæˆèªéŸ³

ä»¥ä¸‹æ˜¯ç°¡å–®çš„ç¯„æœ¬
```python
from TTS.api import TTS

# è¼‰å…¥ XTTS æ¨¡å‹
tts = TTS(model_name="tts_models/multilingual/multi-dataset/xtts_v2", progress_bar=False, gpu=False)

# ç”ŸæˆèªéŸ³
tts.tts_to_file(
    text="ä½ çœŸçš„å¥½ç¬¨å–µâ€¦ä½†æˆ‘é‚„æ˜¯æœƒé™ªä½ å•¦ã€‚",
    speaker_wav="my_voice.wav",  # è²éŸ³æ¨£æœ¬
    language="zh",
    file_path="output.wav"
)
```

ç„¶å¾Œä½ å¯ä»¥ç”¨ playsound() æ’­æ”¾é€™æ®µéŸ³è¨Šï¼
```python
from playsound import playsound

playsound("output.wav")
```

æŸ¥çœ‹å¯ç”¨çš„ TTS æ¨¡å‹ï¼Œæœƒè·‘å‡ºæ•¸åå€‹æ¨¡å‹åç¨±ï¼Œå› æ­¤æœƒè·‘æ¯”è¼ƒä¹…
```bash
tts --list_models
```
**æ‡¶äººåŒ…æ¨è–¦çµ¦ä½ **
| æ¨¡å‹åç¨± | ç‰¹é» | èªè¨€ | éŸ³è³ª | æ”¯æ´ speaker_wav |
|---------|------|------|------|-----------------|
| tts_models/multilingual/multi-dataset/xtts_v2 | âœ… æ”¯æ´èªæ°£ã€è²ç·šå…‹éš†ã€ä¸­æ–‡è¶…è‡ªç„¶ï¼ | âœ… å¤šèªè¨€ | ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ | âœ…âœ…âœ…ï¼ˆå¯è‡ªå®šè²éŸ³ï¼‰ |
| tts_models/zh-CN/baker/tacotron2-DDC-GST | ğŸˆ¶ åŸºæœ¬ä¸­æ–‡ TTSï¼ˆéœ€é… vocoderï¼‰ | ğŸ‡¨ğŸ‡³ ä¸­æ–‡ | ğŸŒŸğŸŒŸğŸŒŸ | âŒ |
| tts_models/multilingual/multi-dataset/your_tts | æ”¯æ´ speaker embeddingï¼ˆèˆŠç‰ˆï¼‰ | å¤šèªè¨€ | ğŸŒŸğŸŒŸğŸŒŸ | âœ… |

## å±•ç¤ºå½±ç‰‡&æˆªåœ–

1. Logæç¤º(èƒ½è‡ªå®šç¾©é¡è‰²)

![Logå±•ç¤º](./assets/log.png)
